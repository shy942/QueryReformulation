173571.txt: viewers tree viewer update children work item expanded lazy tree path content provider update element called content provider call tree viewer replace tree viewer set child count refresh element element expanded set children test tree viewer set children update inored item expanded adding call update child count node problem patch attached sample reproduce problem expand item press change order button expand item press change order button problem disappears item public class test face public static void main string args display display display shell shell shell display shell set layout grid layout grid data data grid data grid data shell set layout data data font font font display courier final tree viewer tree viewer tree viewer shell tree viewer control set layout data data final content provider content provider content provider tree viewer tree viewer set content provider content provider tree viewer set input object button button button shell button set text change order button add selection listener selection listener public void widget default selected selection event public void widget selected selection event parent parent tree viewer refresh shell open shell disposed display read dispatch display sleep font dispose public static boolean parent true public static class content provider implements lazy tree path content provider tree viewer viewer content provider tree viewer viewer viewer viewer public void input changed viewer viewer object input object input public void update children tree path path path segment count viewer set children path true path segment count parent equals path segment viewer set children path true viewer set children path false viewer set children path false public void update child count tree path path int current child count path segment count viewer set child count path path segment count parent equals path segment viewer set child count path viewer set child count path viewer set child count path public void update element tree path path int object object null path segment count object parent parent parent object parent parent parent path segment count parent equals path segment object child object null viewer replace path object update children path create child path object public tree path parents object element return tree path public void dispose
