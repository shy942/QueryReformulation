436645.txt: common navigator navigator content descriptor manager evaluation cache descriptors work org eclipse internal navigator extensions navigator content descriptor manager evaluation cache descriptors return null key inserted set descriptors navigator content descriptor manager evaluation cache attempts prevent memory leak caching long wrapping key evaluation reference set descriptor set problem descriptors method account find key original object fails standard hash map evaluations evaluations overrides evaluation reference equals return false violate symmetry requirement equals exposed navigator content descriptor manager find descriptors child find descriptors trigger point find descriptors calls descriptors method cache wrapping key internal flaw performance implications public simple code snippet reproduce pretend moment evaluation cache isn private navigator content descriptor manager evaluation cache cache cache hard references ensure isn responsible string key key navigator content descriptor descriptors navigator content descriptor cache set descriptors key descriptors navigator content descriptor fetched descriptors cache descriptors key fetched descriptors null throw assertion error find entry assertion error time suggested short term evaluations evaluations overrides weak hash map don bother wrapping key custom reference implementation weak hash map equals underlying object weak reference fact values stored soft references prevent bug issue unfortunate downside making weak intended soft evalutation reference extends soft reference long term custom map implementation properly packs unpacks requests ensuring underlying object equality reference object weak hash map specialized reference implementation evalutation reference accomplish allowing evalutation reference soft weak soft reference values reference queue registered stale entries cleaned evaluation cache instance map entries collected current entry time lazy method stale entries expunged existing cache maps implemented nicely risks clients worked wrapping key queries evalutation reference fixing break couldn find usages don bug fixed evalutation reference internal class common navigator class untested buggy code start cache starts returning
