commands action actions contributed action contribution item menu manager problems getting checked selection initially created clone snippet menu open submenu bar option actions checked select menu item submenu activated menu item dialog item actually clicked compare behavior drop tool bar button menu public class submenu snippet public static void main string args display display display shell shell shell display shell set text submenu snippet class simple shell set layout layout composite parent composite shell parent set layout grid layout false final action list drop action shell final link menu owner link parent menu owner set text menu menu owner selection listener selection adapter public void widget selected selection event appears time manager creates menu manager time repeat easier menu manager menu manager menu manager menu manager list menu manager context menu menu owner set visible true problems contribution tool bar manager tool bar manager tool bar manager tool bar manager tool bar manager list tool bar manager control parent shell pack shell open shell disposed display read dispatch display sleep display dispose public static class drop action extends action implements menu creator private menu dynamic menu private shell shell public drop action shell shell shell shell set text submenu bar set menu creator public menu menu menu parent return menu parent public menu menu control parent return menu parent private menu menu object parent dynamic menu null dynamic menu dispose parent instanceof menu dynamic menu menu menu parent dynamic menu menu control parent entries dynamic menu return dynamic menu public void dispose dynamic menu null dynamic menu dispose dynamic menu null protected void action menu menu parent action action action contribution item item action contribution item action item parent private void entries final menu menu int final string menu item action action action action public void checked message dialog open information menu shell activated menu item action set checked action menu menu action public void message dialog open information shell default action invoked defaul action initially noticed added submenu form header menu manager forms quite popular doesn unusual use case dig deep searched long completely debugging showed following case menu contribution work lines called org jface action action contribution item copy menu menu menu real item comes style considered activation item gets ignored logic bugfix https bugs org bugs cgi following https bugs org bugs cgi snippet tested windows vista initially written tried doesn work doesn
 