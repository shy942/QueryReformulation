contributions unsafe set redraw toolbar manager update code protect itself wrapping code finally ensure set redraw true happens
 