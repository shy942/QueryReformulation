contributions tool bar manger displays wrong number items pack called bunch action items tool bar manager addition call update kind required design observations call pack button update button matter size pack leave find code snippet reproduce problem build code import org eclipse jface action action import org eclipse jface action tool bar manager import org eclipse jface resource image descriptor import org eclipse swt import org eclipse swt graphics color import org eclipse swt graphics import org eclipse swt graphics image import org eclipse swt layout grid layout import org eclipse swt widgets display import org eclipse swt widgets shell import org eclipse swt widgets tool bar public class sample public static void main string args display display display shell shell shell display shell set layout grid layout false create images image blue image image display current color color display current system color blue image set background color fill rectangle blue image bounds dispose image green image image display current color display current system color green image set background color fill rectangle green image bounds dispose image red image image display current color display current system color red image set background color fill rectangle red image bounds dispose tool bar manager tool bar manager tool bar manager tool bar shell tool bar manager add test action blue image tool bar manager update true tool bar manager add test action green image tool bar manager update true tool bar manager add test action red image tool bar manager update true leaving eliminates problem shell set size setting button shell pack calling buttons shell open shell disposed display read dispatch display sleep display dispose class test action extends action public test action image image set image descriptor image descriptor create image image public void system println key pressed code
