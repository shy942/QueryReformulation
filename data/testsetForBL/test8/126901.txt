commands handlers expression authority handler authority huge performance degradation editor tests badly red http download eclipse org downloads drops performance org eclipse jdt text php activate java editors worst profiled activate java editor test times activating java editors started profiling warmup runs attached reports reflect huge regression caused expression authority handler authority expression authority methods called times methods array list itr created attachment method class diffs data provide backtraces needed backtraces helpful doug mail comment created attachment patch bug fixed patch adapts proposed patch bug bug fixed equals hash code expressions control workbench restructured handler authority attempts test set equivalent expressions speed happy approach faster event trigger operations number handlers played constant factor succeeded reducing handlers java editor lot operations problem centralized approach newly active editor handlers handler authority check handlers editor change operation linear number editors constant created attachment revised patch revision patch account revisions patch bug hold committing answer approved doug statement numbers improvements assume profiled compares note performance strange slowed message platform releng reply comment doug statement numbers improvements assume profiled compares speak patches speaking patches bug bug final desired form activate editor test elapsed process patches elapsed process patches curious contributing problem instrumented methods serve entry points handler authority update shell kludge specific patches place total time handler authority alternative approach commenting handler authority methods including update shell kludge time oddly slower running methods place dug bit deeper profiled patches place hot spots gdk pixbuf drawable gdk window pointer main context iteration gdk window origin display sleep gtk main event gdk draw layout java element element info gdk window events lock unlock handler authority resolve conflicts poking bit snapshot hot spots time extraneous updating problems view mentioned problem tod haven opened bug exposing painting performance platform tool bar manager update existed earlier won improved performance graph story time matches machine elapsed process time crazy elapsed process vary time note instrumentation sampling profiler handler authority figure methods called frequently typically cached mentioned comment room improvement handler authority implemented conflict resolution feel reasonable leaving bug open wait final resolution bug revised patch bug applied bug closed doug bunch set numbers showing patch interesting consumer comparison numbers machine running numbers real life scenario activate java editors code tests patches place elapsed process elapsed process hot spots display sleep reconfigure window gdk pixbuf drawable gdk window origin handler authority source changed main content iteration handler authority trim inactive gtk main event evaluation context variable legacy handler submission expression evaluate lock unlock comparing problem markers including errors warnings errors opened bug track refreshing problems view doug tests tests define filter selected element children update editor selection checking happening bug tests performance tests extra filtering defined org eclipse tests closed elapsed process time doug errors depend setup start clean workspace explain reply comment gdk pixbuf drawable gdk window pointer main context iteration gdk window origin interesting measure methods lot time compared builds time spent methods increased explain happen filed bug track tool bar manager update existed earlier won improved measurements time spent method multiplied factor methods time adapted expression outlined bug bug created attachment numbers comparing numbers huge progress performance dani reason read work read fine work created attachment updated comparsion main thread major difference updated attached numbers instr profiling instrumentation sample sampling reopening sill major degradation compared view reason files handler authority larger hot spot hot spot code routed handler authority ways expected text bit clearer org eclipse swt widgets display sleep internal handlers handler authority source changed org eclipse swt graphics text layout draw org eclipse swt internal win call window proc org eclipse swt widgets widget set window pos org eclipse swt widgets display sleep org eclipse swt ole win ole frame msg proc internal handlers handler authority resolve conflicts org eclipse swt widgets control force focus filesystem local local file natives fetch file info handler authority high stack long claim summary expression authority handler authority huge performance degradation expected resolve conflicts time code routed methods simply feature rich actions declared extension points converted commands handlers start retarget actions treated purely commands constructive point start answering questions items list hot spots resolve conflicts takes time span test ole frame msg proc takes time kit recommend profiling feel tend inaccurate speak experience profile perspective switching billy comparisons generated picture attach recommend profiling methods pros cons attached constructive point start answering questions items list hot spots doug code blaming filed hot spots ole frame msg proc explain comparisons threads parser top boils code text simply forgot create parser top change happy understand difference numbers handler story reflect addtional functionality feel free close created attachment picture comparison threads class created attachment picture comparison threads method problem comparison images instrumented data tend handler authority expression authority classes called lot execution time call small case expression authority mentioned comment handler authority doesn time good reasons bit longer closing open bug talk improving performance handlers
 