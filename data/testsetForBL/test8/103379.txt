editor mgmt editor instance leaked time editor open closed driver eclipse win eclipse test framework open close editor editor instance leaked testcase demostrate problem testcase simple creates simple project file opens file editor testcase close editor repeat times interesting editor open allocate size string array private field string array editor testcase xmx memory explicitly set string array null dispose method editor testcase memory leads editor instance leaked created attachment test plugin demostrates memory leak code multipage editor reproduce direct subclass editor reproduce relation bug problem reproducible linux box convert editor plain editor trace leak optimize converted editor leak don navigation history bug navigation history holds editor input problem workbench calling dispose undo action handler undo action handler remains listener list undo action handler holds multi editor site turn holds text editor created editor multi editor site null reference multi editor dispose method operation history action handler null reference site dispose method find dispose called operation history action handler resolve problem guess bet dispose called event doesn arrive nested bug wait nick ring thoughts dispose called action handler receives closed event relies parameter closed match site operation history action handler listener closed workbench equals site dispose bad assumption multi editors reasonable assume site workbench nested parts issue closed nested editor undo redo action handlers disposed explicitly editor agree site editor disposed stefan site problem assigned constructor cleared dispose workbench site return null return null site disposed site disposed view reference dispose editor reference dispose site services disposed wrong dispose method talk site services site hold dispose susan change action handler lifecycle editors dispose action explicitly equals site dispose site instanceof multi editor site equals multi editor site site multi editor dispose work yucky introduce special case checks case don workbench action notified disposal service site registering service assumes top level don special case multi editor extensive special cases multi editor thought stefan component framework class problems code small risk addressing existing code doesn matter response comment problem change action handler doesn rely events dispose clients dispose current behavior bug discussion bug comment revert clients agree comment solution kind yucky odd special case handled action handler view editor feel hack handler editor specific didn nested case listener change bug shipped undo redo action handlers disposing doug suggestion alternative doug suggestion clear underlying problem site null general change risky public void closed workbench workbench current site dispose closing site null cases point dispose https bugs eclipse org bugs bug cgi equals current current null dispose mind remark snippet bogus proposed fixes leak test observing passed leak test pass operation history action handler long multi editor site change nulling multi editor dispose assume doug proposed operation history action handler change comment nulling site dispose method needed based trace optimize absence supplied test case fail doug true don mind releasing proposed operation history action handler note difference multi editor site fixed susan test case comment fails steps description unable reproduce failure comment robustness feel shouldn relied solving kind problem doug observed yesterday verified today running test case unit plugin test workspace latest loaded won list plug ins workspace minimize workspace plug ins difference observations latest code unaltered test case runs java lang memory error apply propose comment test case passes errors apply operation history action handler fixes comment comment applying test case runs java lang memory error prove test case fixes correct debug don problem making operation history action handler fixes prove don optimize relying strictly test case realize nature failure memory leak test pass partial test pass making multi editor site patch suggested comment leak fixed suggested fixes robustness remaining problem traced missing lines test case append open method display display workbench window shell display display read dispatch patch comment suffice patch site held sites release reference vice versa disposed requires bit tweaking lifecycle site reference subclasses multi editor site filed bug site reassigning susan operation doug spin event loop work lifecycle disposing cleanup depend spin event loop chain holding instances roughly display synchronizer synchronizer messages runnable lock abstract text editor text listener site multi editor site multi editor loose translation abstract text editor listener text posts async exec created listener attached listener attached text changed event fired initialize source viewer doug change testcase verify operation history action handler fixes prevent java lang memory error released fixed doug tracking making simpler verify doug kim candidate thoughts include fixes bug nick good committed change maintenance branch verified test pass open editor testcase event loop mods comment test case passes memory error leaving bug marked fixed verified verified time verified linux motif
 