commands memory leak closing workbenchwindow application build steps reproduce create rcp application include plugin case org eclipse edit text org eclipse search contributes commands case org eclipse edit text goto edit position create couple workbench windows workbench open workbench window perspective file editor input method close workbench windows profiling tool workbench window permanent referents garbage collected main reason command legacy action wrappers instances hold workbench window command legacy action wrappers hold action delegate handler proxy created legacy action persistence workbench window references hold commands org eclipse edit text goto edit position clean references clean commands don application general bug reason plugin org eclpise search adding contributet commands menubar toolbar org eclipse edit text goto edit position annother reason working multiple instances workbenchwindows problem occurs version eclipse version leaks weren reproduce behavior default launch configuration product org eclipse platform ide time open window menu command window window invokes open window action close workbench window object referenced data remains heap garbage collected memory leak exists releases compare profiled version simple launch configuration case closing workbench window profile session recorded objects view profiler negligible references version version lot leaking references left starting class workbench window reply comment reproduce behavior default launch configuration product org eclipse platform ide time open window menu command window window invokes open window action close workbench window object referenced data remains heap garbage collected roots holding workbench window command legacy action wrappers action delegate handler proxy legacy action persistence handler proxies shoud disposed workbench window service locator dispose call exported profiler reference views upload created attachment profiler incoming references created attachment profiler outgoing references started recording profiler main workbench window visible opened workbench window closed repeated times stopped profiling garbage collection profiler views uploaded recorded objects left referencing referenced class workbench window curiosity memory analyzer http eclipse org mat scenario start eclipse win select window window close window console write heap dump open heap dump memory analyzer histogram instances org eclipse internal workbench window window closed path roots unnecessary instance attached screenshot understand problem actions created org eclipse internal ide workbench action builder disposed workbench actions created org eclipse actions action factory extend org eclipse internal actions command action turn registers command listeners init method org eclipse core commands command global stay alive action factory workbench action dispose method called command listeners stay alive reference workbench command action handler service default expression window org eclipse internal workbench window voila window lives attached patch builder patch calls dispose actions involved window closed familiar coding place dispose actions actions disposed path displayed concerns org eclipse actions base wizard menu action factory create workbench action dispose action wizardmenu patch attached andreas created attachment path roots unnecessary workbench window created attachment patch dispose action factory workbench action workbench action builder created attachment patch dispose action factory workbench action base wizard menu created attachment action factory dispose calls patch problem calling register quick access action disposing dialog action base wizard menu andreas released updated copyright headers andreas addresses problem paul applied patch tested scenario works narrow scenario open window closing expanding file menu additional references attached screen shot involve contribution item factory manufactures contribution item reference workbench window menu add contribution item factory create window andreas created attachment path roots reopn editor menu reply comment paul applied patch tested scenario works narrow scenario open window closing expanding file menu additional references attached screen shot involve contribution item factory manufactures contribution item reference workbench window menu add contribution item factory create window verification action causing leak action contribution item menu manager investigate today reply comment action causing leak action contribution item menu manager investigate today wait week profiling leak position happen org eclipse jface action action contribution item handle widget dispose event method removes callback listener closing window fire dispose events widget shouldn happen profile week created attachment action factory dispose calls patch additional create calls dispose released released command action menu profiled finally workbench window instance reply comment created attachment details path roots reopn editor menu andreas cover main scenarios opening closing window opening window main menu closing window clears window scenario paul check weeks time andreas paul tested problem andreas
 